<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Traki.Pages.DashboardPage"
             xmlns:coreControls="clr-namespace:Core.Views;assembly=Core"
             Title="Dashboard">

    <Grid RowDefinitions="Auto,Auto,*,Auto,Auto" Padding="10" RowSpacing="10">

        <!-- HEADER -->
        <Grid Grid.Row="0" ColumnDefinitions="Auto, Auto, *, Auto" ColumnSpacing="15">
            <Button Text="Upload"
                    Command="{Binding UploadExcelCommand}"
                    Style="{StaticResource OutlineButtonStyle}"
                    WidthRequest="80"
                    CornerRadius="20"
                    BorderColor="Orange"
                    TextColor="Orange" />

            <Button Text="Download"
                    Command="{Binding DownloadExcelCommand}"
                    Style="{StaticResource OutlineButtonStyle}"
                    WidthRequest="100"
                    CornerRadius="20"
                    BorderColor="Blue"
                    TextColor="Yellow"
                    Grid.Column="1" />

            <Label Text="Balance:"
                   Grid.Column="2"
                   FontSize="16"
                   FontAttributes="Bold"
                   HorizontalTextAlignment="End"
                   VerticalTextAlignment="Center" />

            <Label Text="{Binding Balance}"
                   Grid.Column="3"
                   FontSize="16"
                   FontAttributes="Bold"
                   TextColor="Green"
                   VerticalTextAlignment="Center" />
        </Grid>

        <!-- Filter / Header -->
        <VerticalStackLayout Grid.Row="1" Spacing="5">
            <coreControls:SharedHeaderView x:Name="SharedHeaderControl" />
            <VerticalStackLayout Padding="20" Spacing="10">
                <Label Text="Select Budget" FontAttributes="Bold" />
                <Picker ItemsSource="{Binding AvailableBudgets}"
                SelectedItem="{Binding SelectedBudget}"
                Title="Choose a budget" />

                <Button Text="Create New Budget"
                Command="{Binding CreateNewBudgetCommand}" />

                <!-- Your existing dashboard content below -->
            </VerticalStackLayout>
        </VerticalStackLayout>

        <!-- Scrollable Dynamic Content -->
        <ScrollView Grid.Row="2">
            <ContentView Content="{Binding SelectedTabView}" />
        </ScrollView>

        <!-- Tabs -->
        <HorizontalStackLayout Grid.Row="3" HorizontalOptions="Center" Spacing="20" Padding="0,10">
            <Button Text="Income"
                    Command="{Binding ShowIncomeCommand}"
                    BackgroundColor="LightGreen"
                    TextColor="White"
                    CornerRadius="20"
                    WidthRequest="100" />

            <Button Text="Expense"
                    Command="{Binding ShowExpenseCommand}"
                    BackgroundColor="LightCoral"
                    TextColor="White"
                    CornerRadius="20"
                    WidthRequest="100" />
        </HorizontalStackLayout>

        <!-- Footer Buttons -->
        <HorizontalStackLayout Grid.Row="4" Spacing="20" HorizontalOptions="Center">
            <Button Text="Deposit"
                    Command="{Binding AddMoneyClickedCommand}"
                    WidthRequest="120"
                    BackgroundColor="Green"
                    TextColor="White"
                    CornerRadius="20" />

            <Button Text="Withdraw"
                    Command="{Binding WidthDrawMoneyClickedCommand}"
                    WidthRequest="120"
                    BackgroundColor="Red"
                    TextColor="White"
                    CornerRadius="20" />
        </HorizontalStackLayout>
    </Grid>
</ContentPage>
